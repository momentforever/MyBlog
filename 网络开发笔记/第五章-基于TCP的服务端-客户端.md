<!--
 * @Author: your name
 * @Date: 2021-09-09 09:53:33
 * @LastEditTime: 2021-09-09 10:13:23
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /workspace/Studynote/网络开发笔记·/第五章-基于TCP的服务端-客户端.md
-->
# 基于TCP的服务端/客户端

## TCP套接字中的I/O缓冲

TCP套接字的数据收发无边界。服务器即使调用一次``write``函数传输40个字节的数据，客户端可有可能通过4次``read``函数调用每次读取10字节。

实际上，``write``函数调用后并非立即传输数据，``read``函数调用后也并非马上接收数据。``write``函数调用瞬间，数据将移至输出缓冲；``read``调用瞬间，从输入缓冲读取数据。

I/O缓冲特性整理如下：
+ I/O缓冲在每个TCP套接字中单独存在
+ I/O缓冲在创建套接字时自动生成
+ 即使关闭套接字也会继续传递输出缓冲中的遗留数据
+ 关闭套接字将丢失输入缓冲中的数据

### 滑动窗口

> 是否会出现以下情况：客户端输入缓冲为50字节，而都武器端传输了100字节。

不会，因为TCP中存在滑动窗口协议。TCP不会发送超过输入缓冲大小的数据传输。

该协议是 TCP协议 的一种应用，用于网络数据传输时的流量控制，以避免拥塞的发生。该协议允许发送方在停止并等待确认前发送多个数据分组。由于发送方不必每发一个分组就停下来等待确认。因此该协议可以加速数据的传输，提高网络吞吐量。

> + A: 您好，最多可以向我传递50字节
> + B: 没问题
> + A: 我腾出了20字节的空间，最多可以接收70字节
> + B: 好的